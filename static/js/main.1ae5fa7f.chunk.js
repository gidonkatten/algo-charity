(this["webpackJsonpalgo-charity"]=this["webpackJsonpalgo-charity"]||[]).push([[0],{199:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O}));var r=n(10),a=n.n(r),c=n(15),s=n(24),o=n(0),i=n(358),u=n(357),l=n(200),d=n.n(l),p=n(359),b=n(93),j=n(39),f=n(69),h=n(50),x=n(4);function O(t){var n=Object(o.useState)(NaN),r=Object(s.a)(n,2),l=r[0],O=r[1],m=t.enterCampaign,g=t.setSearch,v=t.setAppState,y=function(){var t=Object(c.a)(a.a.mark((function t(){var n,r,c,s,o,i,u,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(h.a.SEARCHING),m(),t.next=4,Object(f.a)();case 4:return n=t.sent,r=n.statefulBytes,c=n.clearBytes,s=e.from(Uint8Array.from(Object.values(r))).toString("base64"),o=e.from(Uint8Array.from(Object.values(c))).toString("base64"),t.prev=9,t.next=12,j.a.getApplicationByID(l).do();case 12:if(i=t.sent.params,s===i["approval-program"]&&o===i["clear-state-program"]){t.next=16;break}return g(h.a.NOT_VERIFIED),t.abrupt("return");case 16:t.next=23;break;case 18:return t.prev=18,t.t0=t.catch(9),console.log(t.t0),g(h.a.NOT_VERIFIED),t.abrupt("return");case 23:return u=Object(j.b)(i["global-state"]),t.next=26,Object(f.b)(l);case 26:if(d=t.sent,u.get("escrow")===d){t.next=30;break}return g(h.a.NOT_VERIFIED),t.abrupt("return");case 30:v(u),g(h.a.VERIFIED);case 32:case"end":return t.stop()}}),t,null,[[9,18]])})));return function(){return t.apply(this,arguments)}}();return Object(x.jsx)(p.a,{label:"Search...",variant:"outlined",value:l||"",onChange:function(e){return O(parseInt(e.target.value))},InputProps:{inputComponent:b.b,endAdornment:Object(x.jsx)(i.a,{position:"end",children:Object(x.jsx)(u.a,{onClick:y,edge:"end","aria-label":"search",children:Object(x.jsx)(d.a,{})})})},required:!0,fullWidth:!0,InputLabelProps:{required:!1}})}}).call(this,n(18).Buffer)},207:function(e,t,n){"use strict";n.r(t);n(0);var r=n(14),a=n.n(r),c=n(50),s=n(20),o=n(201),i=(n(354),n(355),n(4));a.a.render(Object(i.jsx)(s.a,{utils:o.a,children:Object(i.jsx)(c.b,{})}),document.getElementById("root"))},249:function(e,t){},251:function(e,t){},261:function(e,t){},263:function(e,t){},290:function(e,t){},292:function(e,t){},293:function(e,t){},298:function(e,t){},300:function(e,t){},306:function(e,t){},308:function(e,t){},327:function(e,t){},339:function(e,t){},342:function(e,t){},355:function(e,t,n){},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u}));var r=n(10),a=n.n(r),c=n(15),s=n(33),o=new s.Algodv2("","https://testnet.algoexplorerapi.io/",443),i=(new s.Indexer("","https://testnet.algoexplorerapi.io/idx2",443),function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,i,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:1e3,!(null==o||null==t||n<0)){e.next=3;break}throw new Error("Bad arguments.");case 3:return e.next=5,o.status().do();case 5:if(void 0!==(r=e.sent)){e.next=8;break}throw new Error("Unable to get node status");case 8:c=r["last-round"]+1,s=c;case 10:if(!(s<c+n)){e.next=26;break}return e.next=13,o.pendingTransactionInformation(t).do();case 13:if(void 0===(i=e.sent)){e.next=21;break}if(!(null!==i["confirmed-round"]&&i["confirmed-round"]>0)){e.next=19;break}return e.abrupt("return",i);case 19:if(!(null!=i["pool-error"]&&i["pool-error"].length>0)){e.next=21;break}throw new Error("Transaction Rejected pool error"+i["pool-error"]);case 21:return e.next=23,o.statusAfterBlock(s).do();case 23:s++,e.next=10;break;case 26:throw new Error("Transaction not confirmed after "+n+" rounds!");case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function u(e){var t=new Map;return e&&e&&e.forEach((function(e){var n,r=atob(e.key);n=1===e.value.type?atob(e.value.bytes):e.value.uint,t.set(r,n)})),t}},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var r=n(24),a=n(0),c=n(10),s=n.n(c),o=n(15),i=n(357),u=n(197),l=n.n(u),d=n(4);function p(e){var t=e.onClick;return Object(d.jsx)("div",{className:"back-button",children:Object(d.jsx)(i.a,{onClick:t,children:Object(d.jsx)(l.a,{})})})}var b=n(395),j=n(392),f=n(359),h=n(398),x=n(93),O=n(69);function m(e){return parseInt((e.getTime()/1e3).toFixed(0))}function g(e){return new Date(1e3*e).toDateString()}function v(e){return new Date(1e3*e).toTimeString()}var y=n(30),A=n(33),I=n(39),w=n(198),C=new(n.n(w).a),S=function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.connect();case 3:return t=e.sent,e.abrupt("return",t.map((function(e){return e.address})));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();function E(){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.getTransactionParams().do();case 2:return(t=e.sent).flatFee=!0,t.fee=1e3,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n,r,a,c,s){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(s.a.mark((function e(t,n,r,a,c,o,i){var u,l,d,p,b,j,f,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return u=e.sent,l=new TextEncoder,d=[l.encode(n),Object(A.encodeUint64)(r),Object(A.encodeUint64)(a),Object(A.encodeUint64)(c)],p=Object(y.a)(Object(y.a)({},u),{},{flatFee:!0,type:"appl",from:t,appApprovalProgram:o,appClearProgram:i,appLocalInts:2,appLocalByteSlices:0,appGlobalInts:4,appGlobalByteSlices:2,appArgs:d}),e.next=8,C.signTransaction(p);case 8:return b=e.sent,e.next=11,I.a.sendRawTransaction(b.blob).do();case 11:return j=e.sent,console.log("Transaction: "+j.txId),e.next=15,Object(I.c)(j.txId);case 15:return e.next=17,I.a.pendingTransactionInformation(j.txId).do();case 17:return f=e.sent,h=f["application-index"],console.log("AppId: "+h),e.abrupt("return",h);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(s.a.mark((function e(t,n,r){var a,c,o,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return a=e.sent,c=new TextEncoder,o=[c.encode("set_escrow"),c.encode(r)],i=Object(y.a)(Object(y.a)({},a),{},{flatFee:!0,type:"appl",from:t,appIndex:n,appOnComplete:A.OnApplicationComplete.NoOpOC,appArgs:o}),e.next=8,C.signTransaction(i);case 8:return u=e.sent,e.next=11,I.a.sendRawTransaction(u.blob).do();case 11:return l=e.sent,console.log("Transaction: "+l.txId),e.next=15,Object(I.c)(l.txId);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),c=n[0],i=n[1],u=Object(a.useState)(null),l=Object(r.a)(u,2),g=l[0],v=l[1],y=Object(a.useState)(null),I=Object(r.a)(y,2),w=I[0],C=I[1],S=Object(a.useState)(0),E=Object(r.a)(S,2),N=E[0],T=E[1],D=Object(a.useState)(0),F=Object(r.a)(D,2),G=F[0],P=F[1],L=e.selectedAddress,q=e.exit,B=function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,a,o,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==c.length&&g&&w&&0!==N&&L){e.next=3;break}return e.abrupt("return");case 3:if(n=m(g),r=m(w),!(n>=r)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Object(O.a)();case 9:return a=e.sent,o=a.statefulBytes,u=a.clearBytes,e.next=14,k(L,c,n,r,Object(A.microalgosToAlgos)(N),Uint8Array.from(Object.values(o)),Uint8Array.from(Object.values(u)));case 14:l=e.sent,Object(O.b)(l).then((function(e){R(L,l,e),i(""),v(null),C(null),T(0),P(l)}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)(p,{onClick:q}),G?Object(d.jsxs)("p",{className:"content",children:["Created application with ID ",G,". You can found your campaign by searching for this number."]}):null,Object(d.jsx)("form",{onSubmit:B,children:Object(d.jsxs)(j.a,{container:!0,spacing:3,children:[Object(d.jsx)(j.a,{item:!0,xs:7,children:Object(d.jsx)(f.a,{label:"Name:",value:c,onChange:function(e){return i(e.target.value)},required:!0,fullWidth:!0,inputProps:{maxLength:63},InputLabelProps:{required:!1}})}),Object(d.jsx)(j.a,{item:!0,xs:5,children:Object(d.jsx)(f.a,{label:"Fund Goal (Algo):",value:N,onChange:function(e){return T(Number(e.target.value))},required:!0,InputProps:{inputComponent:x.a},InputLabelProps:{required:!1},fullWidth:!0})}),Object(d.jsx)(j.a,{item:!0,xs:12,children:Object(d.jsx)(f.a,{label:"Selected Address:",value:L||"",helperText:"This can be changed in the landing page",required:!0,InputLabelProps:{required:!1},fullWidth:!0})}),Object(d.jsx)(j.a,{item:!0,xs:6,children:Object(d.jsx)(h.a,{clearable:!0,label:"Start date:",value:g,onChange:function(e){return v(e)},disablePast:!0,format:"yyyy/MM/dd HH:mm",required:!0,InputLabelProps:{required:!1},fullWidth:!0})}),Object(d.jsx)(j.a,{item:!0,xs:6,children:Object(d.jsx)(h.a,{clearable:!0,label:"Expiry Date:",value:w,onChange:function(e){return C(e)},disablePast:!0,format:"yyyy/MM/dd HH:mm",required:!0,InputLabelProps:{required:!1},fullWidth:!0})}),Object(d.jsx)(j.a,{item:!0,xs:12,children:Object(d.jsx)(b.a,{variant:"contained",color:"primary",type:"submit",style:{margin:"8px 0px"},fullWidth:!0,children:"Create"})})]})})]})}function G(e){var t=e.selectedAddress,n=e.search,r=e.appState,a=e.exit,c=Object(d.jsx)(d.Fragment,{children:"Searching..."}),s=Object(d.jsx)(d.Fragment,{children:"The application couldn't be found or verified"}),o=r.size>0&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(f.a,{label:"Selected Address:",value:t||"",helperText:"This can be changed in the landing page",required:!0,InputLabelProps:{required:!1},fullWidth:!0}),Object(d.jsxs)("p",{children:["Name: ",null===r||void 0===r?void 0:r.get("name")]}),Object(d.jsxs)("p",{children:["Start of Campaign: ",g(null===r||void 0===r?void 0:r.get("start")),v(null===r||void 0===r?void 0:r.get("start"))]}),Object(d.jsxs)("p",{children:["End of Campaign: ",g(null===r||void 0===r?void 0:r.get("expiry")),v(null===r||void 0===r?void 0:r.get("expiry"))]}),Object(d.jsxs)("p",{children:["Goal: ",Object(A.microalgosToAlgos)(null===r||void 0===r?void 0:r.get("goal"))," Algo"]}),Object(d.jsxs)("p",{children:["Raised: ",Object(A.microalgosToAlgos)((null===r||void 0===r?void 0:r.get("donated"))||0)," Algo"]})]});return Object(d.jsxs)("div",{children:[Object(d.jsx)(p,{onClick:a}),n===U.SEARCHING?c:null,n===U.NOT_VERIFIED?s:null,n===U.VERIFIED?o:null]})}var P=n(393),L=n(396),q=n(400),B=n(404),M=function(e){var t=e.addresses,n=e.setAddresses,r=e.selectedAddress,a=e.setSelectedAddress,c=function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S().then((function(e){n(e),e.length>0&&a(e[0])}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.target.value)&&a(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{children:[Object(d.jsx)(b.a,{variant:"contained",color:"primary",onClick:c,fullWidth:!0,children:"Connect To MyAlgo Wallet"}),Object(d.jsx)(P.a,{component:"fieldset",children:Object(d.jsx)(B.a,{value:r||"",onChange:i,children:t.map((function(e){return Object(d.jsx)(L.a,{value:e,control:Object(d.jsx)(q.a,{}),label:e},e)}))})})]})},V=n(397);function W(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"How It Works"}),Object(d.jsx)("p",{className:"content",children:"Algo Charity is a platform specifically for match funding campaigns. Match funding is a great way to encourage more people to give and for people to give more as all donations received are multiplied! One has the ability to make an even bigger difference!"}),Object(d.jsx)("p",{className:"content",children:"Blockchain technology guarantees that your contributions are matched to give you the peace of mind that your money matters."}),Object(d.jsxs)(j.a,{container:!0,children:[Object(d.jsxs)(j.a,{item:!0,xs:5,children:[Object(d.jsx)("h3",{children:"Matcher"}),Object(d.jsx)("p",{className:"content",children:"Become a matcher and commit to matching donations up to a certain amount with a chosen ratio."})]}),Object(d.jsx)(j.a,{item:!0,xs:2,children:Object(d.jsx)(V.a,{orientation:"vertical",style:{margin:"auto",width:3}})}),Object(d.jsxs)(j.a,{item:!0,xs:5,children:[Object(d.jsx)("h3",{children:"Donor"}),Object(d.jsx)("p",{className:"content",children:"Become a donor and have your donation automatically matched."})]})]})]})}var H,U,_=n(199);function J(e){var t=e.addresses,n=e.setAddresses,r=e.selectedAddress,a=e.setSelectedAddress,c=e.setSearch,s=e.setAppState,o=e.enterCreate,i=e.enterCampaign;return Object(d.jsxs)("div",{children:[Object(d.jsx)(M,{addresses:t,setAddresses:n,selectedAddress:r,setSelectedAddress:a}),Object(d.jsx)(W,{}),Object(d.jsx)("h2",{children:"Usage"}),Object(d.jsx)("p",{className:"content",children:"Connect your MyAlgo wallet (TestNet) and then either search for an existing campaign or create your own!"}),Object(d.jsx)(_.a,{enterCampaign:i,setSearch:c,setAppState:s}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(b.a,{variant:"contained",color:"primary",onClick:o,fullWidth:!0,children:"Create Fund Campaign"})]})}!function(e){e[e.LANDING=0]="LANDING",e[e.CREATE=1]="CREATE",e[e.CAMPAIGN=2]="CAMPAIGN"}(H||(H={})),function(e){e[e.SEARCHING=0]="SEARCHING",e[e.VERIFIED=1]="VERIFIED",e[e.NOT_VERIFIED=2]="NOT_VERIFIED"}(U||(U={}));t.b=function(){var e=Object(a.useState)(H.LANDING),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),o=Object(r.a)(s,2),i=o[0],u=o[1],l=Object(a.useState)(void 0),p=Object(r.a)(l,2),b=p[0],j=p[1],f=Object(a.useState)(U.SEARCHING),h=Object(r.a)(f,2),x=h[0],O=h[1],m=Object(a.useState)(new Map),g=Object(r.a)(m,2),v=g[0],y=g[1],A=function(){return c(H.LANDING)};return Object(d.jsxs)("div",{className:"page-content",children:[Object(d.jsx)("h1",{children:"Algo Charity"}),n===H.LANDING?Object(d.jsx)(J,{addresses:i,setAddresses:u,selectedAddress:b,setSelectedAddress:j,setSearch:O,setAppState:y,enterCreate:function(){return c(H.CREATE)},enterCampaign:function(){return c(H.CAMPAIGN)}}):null,n===H.CREATE?Object(d.jsx)(F,{selectedAddress:b,exit:A}):null,n===H.CAMPAIGN?Object(d.jsx)(G,{selectedAddress:b,search:x,appState:v,exit:A}):null]})}},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(10),a=n.n(r),c=n(15),s="https://algo-charity.herokuapp.com";function o(){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/application"));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/escrow/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r,a=n(127),c=n(30),s=n(126),o=n(4),i=["hasDecimal","prefix","inputRef","onChange"],u=["inputRef","onChange"];function l(e){return function(e){var t=e.hasDecimal,n=e.prefix,r=e.inputRef,u=e.onChange,l=Object(a.a)(e,i);return Object(o.jsx)(s.a,Object(c.a)(Object(c.a)({},l),{},{getInputRef:r,onValueChange:function(t){u({target:{name:e.name,value:t.value}})},decimalScale:t?6:void 0,fixedDecimalScale:t,thousandSeparator:!0,allowNegative:!1,prefix:n}))}(Object(c.a)(Object(c.a)({},e),{},{hasDecimal:!0}))}function d(e){var t=e.inputRef,n=e.onChange,r=Object(a.a)(e,u);return Object(o.jsx)(s.a,Object(c.a)(Object(c.a)({},r),{},{getInputRef:t,onValueChange:function(t){n({target:{name:e.name,value:t.value}})},allowNegative:!1}))}!function(e){e.DOLLAR="$",e.ALGO="Algo "}(r||(r={}))}},[[207,1,2]]]);
//# sourceMappingURL=main.1ae5fa7f.chunk.js.map